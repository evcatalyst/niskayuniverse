/* Service Line Marker Design Tokens */

/* Spacing Scale */
--space-1: 0.25rem;
--space-2: 0.5rem;
--space-3: 0.75rem;
--space-4: 1rem;
--space-5: 1.25rem;
--space-6: 1.5rem;

/* Border Radius */
--radius-sm: 0.125rem;
--radius-md: 0.25rem;
--radius-lg: 0.5rem;

/* Z-Index */
--z-dropdown: 1000;
--z-sticky: 1020;
--z-fixed: 1030;
--z-modal-backdrop: 1040;
--z-modal: 1050;
--z-popover: 1060;
--z-tooltip: 1070;

/* Shadows */
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

/* Typography */
--font-family: system-ui, -apple-system, sans-serif;
--font-size-xs: 0.75rem;
--font-size-sm: 0.875rem;
--font-size-base: 1rem;
--font-size-lg: 1.125rem;
--font-size-xl: 1.25rem;

/* Motion */
--transition-fast: 150ms ease-in-out;
--transition-normal: 250ms ease-in-out;

/* Animations */
@keyframes loading {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Palettes */

/* Okabe-Ito (default, colorblind-safe) */
--lead: #D55E00;
--copper: #009E73;
--galvanized: #0072B2;
--plastic: #CC79A7;
--unknown-1: #bdbdbd;
--unknown-2: #eeeeee;
--verified: #56B4E9;

/* ColorBrewer Dark2 */
[data-palette="palette-dark2"] {
  --lead: #d95f02;
  --copper: #1b9e77;
  --galvanized: #7570b3;
  --plastic: #e7298a;
  --unknown-1: #bdbdbd;
  --unknown-2: #e5e5e5;
  --verified: #66a61e;
}

/* Monochrome + pattern */
[data-palette="palette-mono"] {
  --lead: #333333;
  --copper: #777777;
  --galvanized: #999999;
  --plastic: #bbbbbb;
  --unknown-1: #bdbdbd;
  --unknown-2: #e5e5e5;
  --verified: #333333;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --lead: #ff8c42;
    --copper: #00d4aa;
    --galvanized: #4da6ff;
    --plastic: #ff99cc;
    --unknown-1: #666666;
    --unknown-2: #333333;
    --verified: #7bc8f2;
  }

  [data-palette="palette-dark2"] {
    --lead: #ff9933;
    --copper: #33cc99;
    --galvanized: #9999ff;
    --plastic: #ff66b2;
    --unknown-1: #666666;
    --unknown-2: #333333;
    --verified: #99dd55;
  }

  [data-palette="palette-mono"] {
    --lead: #cccccc;
    --copper: #888888;
    --galvanized: #666666;
    --plastic: #444444;
    --unknown-1: #666666;
    --unknown-2: #333333;
    --verified: #cccccc;
  }
}

/* Marker Base Styles */
.marker {
  display: inline-block;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  transition: transform var(--transition-fast);
  box-sizing: border-box;
}

.marker:focus {
  outline: 2px solid var(--verified);
  outline-offset: 2px;
}

.marker:hover {
  transform: scale(1.1);
}

/* Size and Ring Inset */
.marker {
  width: var(--token-size, 24px);
  height: var(--token-size, 24px);
  --ring-inset: var(--ring-inset-percent, 34%);
}

/* Unknown Pattern */
.unknown-pattern {
  background: repeating-linear-gradient(
    45deg,
    var(--unknown-1) 0 6px,
    var(--unknown-2) 6px 12px
  );
}

/* States */
.pulse-lead {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.outline-unknown {
  border: 1px dashed var(--unknown-1);
}

.outline-verified {
  border: 1px solid var(--verified);
}

/* Variants */

/* Split */
.marker.split {
  background: linear-gradient(to right, var(--private-color) 50%, var(--public-color) 50%);
}

/* Nested */
.marker.nested {
  background: var(--public-color);
  position: relative;
}

.marker.nested::before {
  content: '';
  position: absolute;
  top: 25%;
  left: 25%;
  width: 50%;
  height: 50%;
  background: var(--private-color);
  border-radius: 50%;
}

/* Donut */
.marker.donut {
  background: var(--public-color);
  position: relative;
}

.marker.donut::before {
  content: '';
  position: absolute;
  top: calc(var(--ring-inset) / 2);
  left: calc(var(--ring-inset) / 2);
  width: calc(100% - var(--ring-inset));
  height: calc(100% - var(--ring-inset));
  background: white;
  border-radius: 50%;
}

.marker.donut::after {
  content: '';
  position: absolute;
  top: calc(var(--ring-inset) / 2);
  left: calc(var(--ring-inset) / 2);
  width: calc(100% - var(--ring-inset));
  height: calc(100% - var(--ring-inset));
  background: conic-gradient(
    var(--private-color) 0deg 180deg,
    var(--public-color) 180deg 360deg
  );
  border-radius: 50%;
}

/* Hex */
.marker.hex {
  clip-path: polygon(50% 0%, 93.3% 25%, 93.3% 75%, 50% 100%, 6.7% 75%, 6.7% 25%);
  background: linear-gradient(to right, var(--private-color) 50%, var(--public-color) 50%);
}

/* Halo */
.marker.halo {
  background: var(--public-color);
  box-shadow: 0 0 8px var(--public-color);
  position: relative;
}

.marker.halo::before {
  content: '';
  position: absolute;
  top: 30%;
  left: 30%;
  width: 40%;
  height: 40%;
  background: var(--private-color);
  border-radius: 50%;
}

/* Band */
.marker.band {
  border-radius: 9999px;
  background: linear-gradient(to right, var(--private-color) 50%, var(--public-color) 50%);
}

/* Pin */
.marker.pin {
  border-radius: 50% 50% 50% 0;
  background: linear-gradient(to right, var(--private-color) 50%, var(--public-color) 50%);
  transform: rotate(-45deg);
}

.marker.pin::before {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  background: var(--private-color);
  border-radius: 50%;
}